@page "{id:int}"
@model SHNGear.Pages.Blog.DetailBlog.IndexModel
@{
    ViewData["Title"] = Model.BlogPost?.Title ?? "Chi tiết Blog";
}

@if (Model.BlogPost == null)
{
    <div class="container py-5">
        <div class="alert alert-danger text-center">Không tìm thấy bài viết.</div>
    </div>
}
else
{
    <div class="container py-5 blog-detail">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <h1 class="mb-3">@Model.BlogPost.Title</h1>
                <div class="mb-2 text-muted">
                    <span><i class="bi bi-person"></i> @Model.BlogPost.AuthorName</span> &nbsp;|&nbsp;
                    <span><i class="bi bi-calendar"></i> @Model.BlogPost.CreatedAt.ToString("dd/MM/yyyy")</span>
                </div>
                @if (Model.BlogPost.Images != null && Model.BlogPost.Images.Count > 0)
                {
                    var img0 = Model.BlogPost.Images[0];
                    var src0 = (img0.StartsWith("http://") || img0.StartsWith("https://")) ? img0 : (img0.StartsWith("/") ? img0 : "/" + img0);
                    <div class="mb-4">
                        <img src="@src0" class="img-fluid rounded shadow" alt="Ảnh chính" style="max-height:400px;object-fit:cover;">
                    </div>
                    @if (Model.BlogPost.Images.Count > 1)
                    {
                        <div class="blog-thumbs mb-4">
                            @for (int i = 1; i < Model.BlogPost.Images.Count; i++)
                            {
                                var img = Model.BlogPost.Images[i];
                                if (!string.IsNullOrEmpty(img))
                                {
                                    var src = (img.StartsWith("http://") || img.StartsWith("https://")) ? img : (img.StartsWith("/") ? img : "/" + img);
                                    <img src="@src" alt="Ảnh phụ @i" title="Ảnh phụ @i" />
                                }
                            }
                        </div>
                    }
                }
                <div class="blog-content mb-5">
                    @Html.Raw(Model.BlogPost.Content)
                </div>
                <a href="/Blog" class="btn btn-outline-secondary">← Quay lại danh sách</a>
            </div>
        </div>
    </div>
}
<link rel="stylesheet" href="/css/blog-list.css" />
